<Page x:Class="TurretApp.Views.ClearancePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{StaticResource BgBrush}">
    <Grid Margin="30,20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="&#x25CE; DIE CLEARANCE CALCULATOR" FontSize="22" FontWeight="Bold" Foreground="{StaticResource AccentBrightBrush}" FontFamily="{StaticResource TerminalFont}"/>
            <TextBlock Text="Textbook percentages vs empirical shop-proven clearances" FontSize="13" Foreground="{StaticResource TextMutedBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Input Row: Material, Thickness, Operation -->
        <Border Grid.Row="1" Style="{StaticResource SectionPanel}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="Material" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,4"/>
                    <ComboBox x:Name="CboMaterial" SelectionChanged="OnInputChanged"
                              Background="{StaticResource BgInputBrush}" Foreground="{StaticResource TextBrush}"
                              BorderBrush="{StaticResource BorderBrush}" Padding="8,6" FontSize="14">
                        <ComboBoxItem Content="Mild Steel (CRS/HRS)" Tag="MildSteel"/>
                        <ComboBoxItem Content="Stainless Steel (304)" Tag="SS304"/>
                        <ComboBoxItem Content="Stainless Steel (316)" Tag="SS316"/>
                        <ComboBoxItem Content="Aluminum (5052)" Tag="AL5052"/>
                        <ComboBoxItem Content="Aluminum (6061)" Tag="AL6061"/>
                        <ComboBoxItem Content="Copper" Tag="Copper"/>
                        <ComboBoxItem Content="Brass" Tag="Brass"/>
                        <ComboBoxItem Content="Galvanized" Tag="Galvanized"/>
                    </ComboBox>
                </StackPanel>

                <StackPanel Grid.Column="2">
                    <TextBlock Text="Material Thickness (mm)" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,4"/>
                    <TextBox x:Name="TxtThickness" TextChanged="OnInputChanged"
                             Background="{StaticResource BgInputBrush}" Foreground="{StaticResource TextBrush}"
                             BorderBrush="{StaticResource BorderBrush}" Padding="8,6" FontSize="16" FontFamily="{StaticResource TerminalFont}"/>
                </StackPanel>

                <StackPanel Grid.Column="4">
                    <TextBlock Text="Operation" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,4"/>
                    <ComboBox x:Name="CboOperation" SelectionChanged="OnInputChanged"
                              Background="{StaticResource BgInputBrush}" Foreground="{StaticResource TextBrush}"
                              BorderBrush="{StaticResource BorderBrush}" Padding="8,6" FontSize="14">
                        <ComboBoxItem Content="Standard Punch" Tag="Standard"/>
                        <ComboBoxItem Content="Nibbling" Tag="Nibble"/>
                        <ComboBoxItem Content="Louver / Form" Tag="Louver"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Results Row: Textbook vs Empirical side by side -->
        <Grid Grid.Row="2" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Textbook / Mate Panel -->
            <Border Grid.Column="0" Style="{StaticResource SectionPanel}">
                <StackPanel>
                    <TextBlock Text="TEXTBOOK / MATE RECOMMENDED" Style="{StaticResource SectionHeader}"/>
                    <TextBlock Text="Based on standard percentage of material thickness" FontSize="11" Foreground="{StaticResource TextMutedBrush}" Margin="0,4,0,14"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Clearance %:" Foreground="{StaticResource TextMutedBrush}" FontSize="13" Margin="0,4"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TxtTextbookPct" Text="--" Foreground="{StaticResource AccentBrightBrush}" FontSize="13" FontWeight="Bold" FontFamily="{StaticResource TerminalFont}" Margin="0,4"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Per-Side Clearance:" Foreground="{StaticResource TextMutedBrush}" FontSize="13" Margin="0,4"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="TxtTextbookPerSide" Text="--" Foreground="{StaticResource AccentBrightBrush}" FontSize="16" FontWeight="Bold" FontFamily="{StaticResource TerminalFont}" Margin="0,4"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Total (Diameter):" Foreground="{StaticResource TextMutedBrush}" FontSize="13" Margin="0,4"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TxtTextbookTotal" Text="--" Foreground="{StaticResource AccentBrightBrush}" FontSize="16" FontWeight="Bold" FontFamily="{StaticResource TerminalFont}" Margin="0,4"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Empirical Panel -->
            <Border Grid.Column="2" Style="{StaticResource SectionPanel}">
                <StackPanel>
                    <TextBlock Text="EMPIRICAL / SHOP-PROVEN" Style="{StaticResource SectionHeader}"/>
                    <TextBlock Text="Adjusted values from production experience" FontSize="11" Foreground="{StaticResource TextMutedBrush}" Margin="0,4,0,14"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Clearance %:" Foreground="{StaticResource TextMutedBrush}" FontSize="13" Margin="0,4"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TxtEmpiricalPct" Text="--" Foreground="{StaticResource InfoBrush}" FontSize="13" FontWeight="Bold" FontFamily="{StaticResource TerminalFont}" Margin="0,4"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Per-Side Clearance:" Foreground="{StaticResource TextMutedBrush}" FontSize="13" Margin="0,4"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" x:Name="TxtEmpiricalPerSide" Text="--" Foreground="{StaticResource InfoBrush}" FontSize="16" FontWeight="Bold" FontFamily="{StaticResource TerminalFont}" Margin="0,4"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Total (Diameter):" Foreground="{StaticResource TextMutedBrush}" FontSize="13" Margin="0,4"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TxtEmpiricalTotal" Text="--" Foreground="{StaticResource InfoBrush}" FontSize="16" FontWeight="Bold" FontFamily="{StaticResource TerminalFont}" Margin="0,4"/>
                    </Grid>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Empirical Data Table -->
        <Border Grid.Row="3" Style="{StaticResource SectionPanel}" Margin="0,16,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <TextBlock Text="EMPIRICAL DATA TABLE" Style="{StaticResource SectionHeader}"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="BtnAddRow" Content="+ ADD" Click="OnAddRow" Style="{StaticResource NavButton}" Margin="0,0,8,0" Padding="12,4"/>
                        <Button x:Name="BtnDeleteRow" Content="DELETE" Click="OnDeleteRow" Style="{StaticResource DangerButton}" Padding="12,4"/>
                    </StackPanel>
                </Grid>

                <DataGrid Grid.Row="1" x:Name="DgEmpirical"
                          AutoGenerateColumns="False" CanUserAddRows="False"
                          Background="{StaticResource BgTertiaryBrush}" Foreground="{StaticResource TextBrush}"
                          BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                          RowBackground="{StaticResource BgSecondaryBrush}" AlternatingRowBackground="{StaticResource BgTertiaryBrush}"
                          GridLinesVisibility="Horizontal" HorizontalGridLinesBrush="{StaticResource BorderBrush}"
                          HeadersVisibility="Column" FontSize="13" SelectionMode="Single">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Material" Binding="{Binding Material}" Width="*" Foreground="{StaticResource TextBrush}"/>
                        <DataGridTextColumn Header="Thickness (mm)" Binding="{Binding Thickness}" Width="120" Foreground="{StaticResource TextBrush}"/>
                        <DataGridTextColumn Header="Clearance %" Binding="{Binding ClearancePct}" Width="120" Foreground="{StaticResource TextBrush}"/>
                        <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="*" Foreground="{StaticResource TextBrush}"/>
                    </DataGrid.Columns>
                </DataGrid>

                <TextBlock Grid.Row="2" Text="Empirical data is saved per-session. Add your shop-specific clearance values here." FontSize="11" Foreground="{StaticResource TextMutedBrush}" Margin="0,8,0,0"/>
            </Grid>
        </Border>
    </Grid>
</Page>
