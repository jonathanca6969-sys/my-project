<Page x:Class="TurretApp.Views.DieHeightPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{StaticResource BgBrush}">
    <Grid Margin="30,20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="&#x2B21; DIE HEIGHT CALCULATOR" FontSize="22" FontWeight="Bold" Foreground="{StaticResource AccentBrightBrush}" FontFamily="{StaticResource TerminalFont}"/>
            <TextBlock Text="Calculate shim requirements and remaining grind life for Mate dies" FontSize="13" Foreground="{StaticResource TextMutedBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Input Row: Die Selection + Measurement side by side -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Die Selection Panel -->
            <Border Grid.Column="0" Style="{StaticResource SectionPanel}">
                <StackPanel>
                    <TextBlock Text="DIE SELECTION" Style="{StaticResource SectionHeader}"/>

                    <TextBlock Text="Die Type / Station" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,10,0,4"/>
                    <ComboBox x:Name="CboDieType" SelectionChanged="OnInputChanged"
                              Background="{StaticResource BgInputBrush}" Foreground="{StaticResource TextBrush}"
                              BorderBrush="{StaticResource BorderBrush}" Padding="8,6" FontSize="14">
                        <ComboBoxItem Content="12.7mm - Station A" Tag="A"/>
                        <ComboBoxItem Content="24.0mm - Station B" Tag="B"/>
                        <ComboBoxItem Content="31.0mm - Station C" Tag="C"/>
                        <ComboBoxItem Content="89.0mm - Station D" Tag="D"/>
                    </ComboBox>

                    <!-- Die Specs Display -->
                    <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="12,10" Margin="0,14,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="New Height:" Foreground="{StaticResource TextMutedBrush}" FontSize="12" Margin="0,2"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TxtNewHeight" Text="--" Foreground="{StaticResource TextBrush}" FontSize="12" FontWeight="Bold" Margin="0,2"/>
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Min Height:" Foreground="{StaticResource TextMutedBrush}" FontSize="12" Margin="0,2"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="TxtMinHeight" Text="--" Foreground="{StaticResource TextBrush}" FontSize="12" FontWeight="Bold" Margin="0,2"/>
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Grind Limit:" Foreground="{StaticResource TextMutedBrush}" FontSize="12" Margin="0,2"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TxtGrindLimit" Text="--" Foreground="{StaticResource TextBrush}" FontSize="12" FontWeight="Bold" Margin="0,2"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Measurement Panel -->
            <Border Grid.Column="2" Style="{StaticResource SectionPanel}">
                <StackPanel>
                    <TextBlock Text="MEASUREMENT" Style="{StaticResource SectionHeader}"/>

                    <TextBlock Text="Measured Die Height (mm)" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,10,0,4"/>
                    <TextBox x:Name="TxtMeasured" TextChanged="OnInputChanged"
                             Background="{StaticResource BgInputBrush}" Foreground="{StaticResource TextBrush}"
                             BorderBrush="{StaticResource BorderBrush}" Padding="8,6" FontSize="16" FontFamily="{StaticResource TerminalFont}"/>

                    <TextBlock Text="Existing Shims (mm)" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,14,0,4"/>
                    <TextBox x:Name="TxtExistingShims" TextChanged="OnInputChanged" Text="0"
                             Background="{StaticResource BgInputBrush}" Foreground="{StaticResource TextBrush}"
                             BorderBrush="{StaticResource BorderBrush}" Padding="8,6" FontSize="16" FontFamily="{StaticResource TerminalFont}"/>

                    <TextBlock Text="Enter measured value without shims, or total with shims noted separately."
                               FontSize="11" Foreground="{StaticResource TextMutedBrush}" Margin="0,10,0,0" TextWrapping="Wrap"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Results Section -->
        <Border Grid.Row="2" Style="{StaticResource SectionPanel}" Margin="0,20,0,0">
            <StackPanel>
                <TextBlock Text="RESULTS" Style="{StaticResource SectionHeader}"/>

                <!-- 4 stat boxes -->
                <UniformGrid Columns="4" Margin="0,14,0,0">
                    <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="14,12" Margin="0,0,8,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="REMOVED" FontSize="11" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="TxtRemoved" Text="--" Style="{StaticResource BigValue}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                            <TextBlock Text="mm ground off" FontSize="10" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="14,12" Margin="4,0,4,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="LIFE LEFT" FontSize="11" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="TxtLifeLeft" Text="--" Style="{StaticResource BigValue}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                            <TextBlock Text="% remaining" FontSize="10" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="14,12" Margin="4,0,4,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="SHIM REQUIRED" FontSize="11" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="TxtShimRequired" Text="--" Style="{StaticResource BigValue}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                            <TextBlock Text="mm total shim" FontSize="10" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="14,12" Margin="8,0,0,0">
                        <StackPanel HorizontalAlignment="Center">
                            <TextBlock Text="FINAL HEIGHT" FontSize="11" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="TxtFinalHeight" Text="--" Style="{StaticResource BigValue}" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                            <TextBlock Text="mm with shims" FontSize="10" Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </UniformGrid>

                <!-- Shim Combination Recommendation -->
                <Border Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="16,14" Margin="0,16,0,0">
                    <StackPanel>
                        <TextBlock Text="RECOMMENDED SHIM COMBINATION" FontSize="12" Foreground="{StaticResource AccentBrush}" FontWeight="Bold"/>
                        <TextBlock x:Name="TxtShimCombo" Text="Select die type and enter measured height to calculate..."
                                   FontSize="18" Foreground="{StaticResource AccentBrightBrush}" FontFamily="{StaticResource TerminalFont}"
                                   Margin="0,8,0,0" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="{StaticResource BgTertiaryBrush}" CornerRadius="3" Padding="14,8" Margin="0,12,0,0">
            <TextBlock x:Name="TxtStatus" Text="> Awaiting input..." FontSize="12" Foreground="{StaticResource TextMutedBrush}" FontFamily="{StaticResource TerminalFont}"/>
        </Border>
    </Grid>
</Page>
